
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="https://www.w3.org/1999/xhtml">

<head>


 <title>USACO</title>
 <link rel="stylesheet" type="text/css" href="current/usaco.css">
 <script src="current/js/jquery.min.js"></script>
 <script src="current/js/d3.v3.min.js"></script>

<META HTTP-EQUIV="EXPIRES" CONTENT="0">
 <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
 <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    "HTML-CSS": {
	scale: 85,
	preferredFont: "STIX"
    },
  tex2jax: {
    inlineMath: [['$','$'],['\\(','\\)']],
    processEscapes: true,
    skipTags: ['pre'],
    processClass: "mathjax",
    ignoreClass: "no-mathjax"
  }
});
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</head>

<body class="no-mathjax">
 <div align="center">
  <div class="shadow1">

   <div class="content">

  
 <a href="index.php"><img src="current/images/usaco_logo.png" height="130px" border="0px" /></a> 

    <div class="navbar" align="left" border="10px">
     <ul>
      <li><a href="index.php">Overview</a></li> 
      <li><a href="index.php?page=training">Training</a></li>
      <li><a href="index.php?page=contests">Contests</a></li>
      <li><a href="index.php?page=history">History</a></li>
      <li><a href="index.php?page=staff">Staff</a></li>
      <li><a href="index.php?page=resources">Resources</a></li>
     </ul>
    </div><br/>

   
    


<div style="position:relative; float:left; left:10px; top:-50px; width:550px;"> 
<div class="panel">

<h2> USACO 2019 US Open Contest, Platinum </h2>
<h2> Problem 1. Tree Boxes </h2>
 
</div>
</div>

<div align="right" style="position:relative; float:right; right:30px; top:-40px; width:350px;">

<button style="margin-bottom:6px;" type="button" onClick="window.location='index.php?page=open19results';">Return to Problem List</button><br style="padding-top:6px"/>
Contest has ended.

</div>

<br style="clear:both" />


<div id="last-status" style="padding:10px; position:relative; float:left; left:30px; top:-45px; width:820px; border:1px solid black; background-color:#FFF; " 
	data-response-code="-1" data-sid="-1"> 
   <img src="current/images/ajax.gif"/> <p style="display:inline;"> <b>Log in to allow submissions in analysis mode</b></p>
<div id="trial-information"></div>
<p style="text-align:left;" class="mono prewrap output-data"></p>
</div>

<br style="clear:both" />

<div align="right" style="position:relative; float:right; right:40px; top:-93px; width:350px; z-index:2; padding:0px;">

<form style="padding-top:60px;" action=""> 
<select name="lang" style="background-color:#eee;" id="choose-language">
<option value='en' selected='yes'>English (en)</option>
<option value='fr'>French (fr)</option>
<option value='ru'>Russian (ru)</option>
<option value='es'>Spanish (es)</option>
<option value='zh'>Chinese (zh)</option>
</select>
</form>

</div>

<div align="left" style="position:relative; float:left; left:30px; top:-100px; width:840px; z-index:1;"> 
<div align="left" class="problem-text" style='width:800px; padding-top:10px;'>
<span id="probtext-text" class="mathjax">Farmer John is planning to build $N$ ($1 \leq N \leq 10^5$) farms that will be
connected by $N-1$ roads, forming a tree. Typically, whenever one of his farms
is having an issue he is not told the specific farm that is having an issue.
Instead, he is told that one of the farms along the path from some farm $A$ to
another farm $B$ is having an issue. This is often confusing for Farmer John, as
he usually drives offroad tractors and isn't familiar with the road system.

<p>Farmer John considers the location of a farm to be a 2D point. He would
prefer to be told that there is a problem in one of the farms in a specified
axis-aligned rectangular box. This way Farmer John can decide for himself how to
navigate between the farms. Bessie told him that this is a little too ambitious,
so he will be satisfied if he is notified with at most two axis-aligned
rectangular boxes whose intersection (of farms) is empty and whose union is
exactly the farms along the path from $A$ to $B$. You must help Farmer John
determine where he should build his farms such that this condition is satisfied.

<p>This is an interactive problem, you will not be using standard (or file) I/O.
<strong> Solutions that use standard (or file) I/O will be disqualified. </strong>
However, you ARE ALLOWED to use global and static variables. You must implement
the following functions to help Farmer John:

<p><ul><li> <strong> void addRoad(int A, int B)</strong>: processes a road between farms  $A$ and
$B$ ($0 \le A, B \le N - 1$).
</li><li> <strong> void buildFarms()</strong>: determines where Farmer John should build all
his farms.
</li><li> <strong> void notifyFJ(int A, int B)</strong>: notifies Farmer John with either one
or two boxes that satisfy the aforementioned conditions.
</li></ul>

<p>Your implementation of the above functions will be able to call the functions
given below.  You may assume that $\texttt{notifyFJ}$ will be called $Q$ times ($1 \leq Q \leq 10^5$).

<p><ul><li> <strong> int getN()</strong>: gets the value of $N$.
</li><li> <strong> int getQ()</strong>: gets the value of $Q$.
</li><li> <strong> void setFarmLocation(int ID, int X, int Y)</strong>: determines that Farmer
John should build farm $ID$ ($0 \le ID \le N-1$) at location $(X,Y)$ where 
$(1 \le X, Y \le N )$. Should only be called from $\texttt{buildFarms}$.
</li><li> <strong> void addBox(int X1, int Y1, int X2, int Y2)</strong>: adds a box to notify
Farmer John where $(1 \le X1 \le X2 \le N )$ and
$(1 \le Y1 \le Y2 \le N )$. Should only be called from $\texttt{notifyFJ}$. 
</li></ul>

<p>The interactive protocol works as follows. First, $\texttt{addRoad}$ will be
called $N-1$ times, to inform your program of the road system. Then,
$\texttt{buildFarms}$ will be called and you must determine where Farmer John
should build each farm and call $\texttt{setFarmLocation}$ for every farm
accordingly. Finally, there will be $Q$ calls to $\texttt{notifyFJ}$ where you
must make either one or two calls to $\texttt{addBox}$ to notify Farmer John.

<p>It is guaranteed there is always a valid way to notify Farmer John using either
one or two boxes.  The memory limit for this problem is set to 512MB, above
the usual 256MB limit.

<p>For a C++ solution, use this template:
<pre class='prettyprint'>
#include "grader.h"

void addRoad(int a, int b){
	// Fill in code here
}

void buildFarms(){
	// Fill in code here
}

void notifyFJ(int a, int b){
	// Fill in code here
}
</pre>

<p>For a Java solution, use this template:
<pre class='prettyprint'>
import java.io.IOException;
// If you find it necessary, you may import other standard libraries here.
public class boxes extends Grader {

  	// Copy this exactly:
        
@Override
  	public static void main(String args[]) throws IOException { new boxes().run(); }

        
@Override
  	public void addRoad(int a, int b) {
      // Fill in code here
  	}
        
@Override
  	public void buildFarms(){
      // Fill in code here
	  }
  	
@Override
  	public void notifyFJ(int a, int b){
      // Fill in code here
  	}
}
</pre>

<p><strong> Sample Interaction </strong> 

<p>Grader calls $\texttt{addRoad(0,1)}$

<p>Grader calls $\texttt{addRoad(1,2)}$

<p>Grader calls $\texttt{buildFarms()}$

<p>Solution calls $\texttt{setFarmLocation(0,1,1)}$

<p>Solution calls $\texttt{setFarmLocation(1,1,2)}$

<p>Solution calls $\texttt{setFarmLocation(2,2,2)}$

<p>Solution ends $\texttt{buildFarms()}$

<p>Grader calls $\texttt{notifyFJ(0,0)}$

<p>Solution calls $\texttt{addBox(1,1,1,1)}$

<p>Solution ends $\texttt{notifyFJ(0,0)}$

<p>Grader calls $\texttt{notifyFJ(0,2)}$

<p>Solution calls $\texttt{addBox(1,1,1,2)}$

<p>Solution calls $\texttt{addBox(2,2,2,2)}$

<p>Solution ends $\texttt{notifyFJ(0,2)}$

<p>Grader terminates, and solution passes test-case

<p> (Note: if you do not
pass the first test case, the grader will indicate this as usual.  However, note that the
short sample interaction above does not correspond to the first test case or any
other).
<p>
<p>Problem credits: Spencer Compton
</span>
</div>

           Contest has ended.  No further submissions allowed.
    
</div>

<div align="left" style="position:relative; float:left; left:30px; top:-70px; width:840px;"> 

</div>

<br style="clear:both" />

<script>
 var retries = 100, timeout = 1000;

 function postback()
 { 
     var sid = $('#last-status').data('sid'); if (sid == -1) return;
     $.post('current/tpcm/status-update.php', { sid: sid }, update_response, 'json'); 
 }

 function update_response(s)
 {
     // only try a limited number of times
     if (--retries < 0) return;

     // if there is xml data, update the DOM
     if (s != null)
     {
	 $('#last-status img').attr("src","current/images/medal_none.png");
	 if (parseInt(s.cd) <= -8 && s.sc == 'status-working') { $('#last-status img').attr("src","current/images/ajax.gif"); }

         // change class and text of the response box
         $('#last-status').removeClass().addClass(s.sc);
         $('#last-status p').text(s.sr);

         // change the response code of the data section
         $('#last-status').data('response-code', parseInt(s.cd));
	 $('#last-status .output-data').hide();

	 if (s.output != null)
	 {
	     $('#last-status .output-data').show().text(s.output);
	     // if the status is in a "working" state, keep checking
	     if (parseInt($('#last-status').data('response-code')) <= -8)
		 { setTimeout(postback, timeout); timeout *= 1.1; }

	     return;
	 }

	 if (s.jd != null && s.jd.length != 0)
	     $('#trial-information').html(s.jd);
     }

     // if the status is in a "working" state, keep checking
     if (parseInt($('#last-status').data('response-code')) <= -8)
         { setTimeout(postback, timeout); timeout *= 1.1; }
 }

 $(document).ready(function(){
     $('#last-status .output-data').hide();
     $('#last-status img').attr("src","current/images/medal_none.png");
     if ($('#last-status').length) postback();

     $('.masterTooltip').hover(function(){
	 // Hover over code
	 var title = $(this).attr('title');
	 $(this).data('tipText', title).removeAttr('title');
	 $('<p class="tooltip"></p>').text(title).appendTo('body').fadeIn('fast');
     }, function() {
	 // Hover out code
	 $(this).attr('title', $(this).data('tipText'));
	 $('.tooltip').remove();
     }).mousemove(function(e) {
	 var mousex = e.pageX + 20; //Get X coordinates
	 var mousey = e.pageY + 10; //Get Y coordinates
	 $('.tooltip').css({ top: mousey, left: mousex })
     });
 });

 $('#choose-language').change(function(e){
     window.location = "index.php?page=viewproblem2&cpid=948&lang=" + $(this).val();
 });

</script>


   </div>
  </div>
 </div>

 <br style="clear:both" />

<script>(function(){if (!document.body) return;var js = "window['__CF$cv$params']={r:'86a9ee7e4c453b4d',t:'MTcxMTQ4NTM3My4xODgwMDA='};_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js',document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>

</html>


